<html xmlns:th="http://www.thymeleaf.org">

<head>
    <style>
    </style>
</head>
<body>
<!-- OVERVIEW -->
<div class="panel panel-headline" style="height: 500px">
    <div class="panel-heading">
        名字：<select name="" id="name">
        <option value="">请选择</option>
    </select> &nbsp;&nbsp;&nbsp;&nbsp;
        年份
        <select name="" id="year">
            <option value="">请选择</option>
            <option value="2010">2010</option>
            <option value="2011">2011</option>
            <option value="2012">2012</option>
            <option value="2013">2013</option>
            <option value="2014">2014</option>
            <option value="2015">2015</option>
            <option value="2016">2016</option>
            <option value="2017">2017</option>
        </select>
        &nbsp;&nbsp;&nbsp;&nbsp;
        <input type="button" value="提交" onclick="predictPrice()" class="btn btn-primary">

        <h4>结果</h4>
        <table id="result"></table>
    </div>
</div>
<script>
    $(function () {
        $.ajax({
            url: "get_name_list.json",
            method: "GET",
            dataType: "json",
            data: {},
            success: function (data) {
                for (var index in data.data) {
                    $('#name').append($("<option name='" + data.data[index] + "'>" + data.data[index] + "</option>"))
                }
            }
        });
    });

    function predictPrice() {
        var data = {
            name: $('#name').val(),
            year: $('#year').val()
        };

        $.ajax({
            url: "call_matlab.json",
            method: "GET",
            dataType: "json",
            data: data,
            success: function (data) {
                showData(data.data);
            }
        });
    }

    function showData(data) {
        var colspan = data.predictValue.length;

        var tr = $("<tr></tr>");
        $("<td>预测值</td>").appendTo(tr);
        for (var j = 0; j < data.predictValue.length; j++) {
            $("<td>" + data.predictValue[j] + "</td>").appendTo(tr);
        }
        tr.appendTo($('#tableShow'));

        tr = $("<tr></tr>");
        $("<td>真实值</td>").appendTo(tr);
        for (j = 0; j < data.realValue.length; j++) {
            $("<td>" + data.realValue[j] + "</td>").appendTo(tr);
        }
        tr.appendTo($('#tableShow'));

        tr = $("<tr></tr>");
        $("<td>绝对误差</td>").appendTo(tr);
        for (j = 0; j < data.jdwc.length; j++) {
            $("<td>" + data.jdwc[j] + "</td>").appendTo(tr);
        }
        tr.appendTo($('#tableShow'));

        tr = $("<tr></tr>");
        $("<td>相对误差</td>").appendTo(tr);
        for (j = 0; j < data.xdwc.length; j++) {
            $("<td>" + data.xdwc[j] + "</td>").appendTo(tr);
        }
        tr.appendTo($('#tableShow'));

        tr = $("<tr></tr>");
        $("<td>均方根误差</td>").appendTo(tr);
        $("<td colspan='" + colspan + "'>" + data.jfgwc + "</td>").appendTo(tr);
        tr.appendTo($('#tableShow'));
    }
</script>
</body>
</html>